name: Tests

on:
  pull_request:
    branches:
      - main

jobs:
  tests:
    name: Tests
    runs-on: ubuntu-latest
    strategy:
      matrix:
        include:
          - package: adventure_maker
            package_name: adventure_maker
            run_code_gen: 'yes'
            project_type: flutter
          - package: flireator
            package_name: flireator
            run_code_gen: 'yes'
            project_type: flutter
          - package: redfire
            package_name: redfire
            run_code_gen: 'no'
            project_type: flutter
          - package: redfire_test
            package_name: redfire_test
            run_code_gen: 'no'
            project_type: flutter
          - package: tech_world
            package_name: tech_world
            run_code_gen: 'yes'
            project_type: flutter
          - package: the_process
            package_name: the_process
            run_code_gen: 'yes'
            project_type: flutter
          - package: ws_game_server
            package_name: ws_game_server
            run_code_gen: 'no'
            project_type: dart
          - package: ws_game_server_types
            package_name: ws_game_server_types
            run_code_gen: 'no'
            project_type: dart
    steps:
      - uses: actions/checkout@v2
      - uses: enspyrco/run-tests-action@v0
        with:
          packages_path: packages/
          package_name: ${{ matrix.package_name }}
          run_code_gen: ${{ matrix.run_code_gen }}
          project_type: ${{ matrix.project_type }}

    
